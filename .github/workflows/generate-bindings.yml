name: Generate Bindings
on:
  push:
    branches:
      # Example 'onshape-1.198.56003-1d9a9adcc29e_25871'
      - onshape-[0-9]+.[0-9]+.[0-9]+-[0-9a-f]+_[0-9]+
    paths:
      - 'openapi.json'
  workflow_dispatch:
  workflow_call:

jobs:
  generate:
    # TODO: Revert to main
    uses: onshape-public/openapi-utilities/.github/workflows/generate-bindings.yml@bugfix/fix-definition-not-on-master
    secrets:
      BOT_ACCESS_TOKEN: ${{ secrets.GH_PAT }}
      ONSHAPE_API_ACCESS_KEY: ${{ secrets.ONSHAPE_API_KEY_DEMO_C }}
      ONSHAPE_API_SECRET_KEY: ${{ secrets.ONSHAPE_API_SECRET_DEMO_C }}